(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,a,c,i,l,u,s;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),r=setInterval(a,1e3);function a(){var e,a,c,i=(e=(new Date("13 november 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(e%60),c=Math.floor(e/60%60),{timerRemaining:e,hours:Math.floor(e/60/60%24),minutes:c,seconds:a});t.textContent=i.hours<=9?"0"+i.hours:i.hours,n.textContent=i.minutes<=9?"0"+i.minutes:i.minutes,o.textContent=i.seconds<=9?"0"+i.seconds:i.seconds,i.timerRemaining<0&&(t.textContent="00",n.textContent="00",o.textContent="00",clearInterval(r))}a()})(),l=document.querySelector(".menu"),u=document.querySelector("menu"),s=function(){u.classList.toggle("active-menu")},l.addEventListener("click",s),u.addEventListener("click",(function(e){var t=e.target;(t.closest(".active-menu ul")||t.classList.contains("close-btn"))&&s()})),a=document.querySelector(".popup"),c=document.querySelectorAll(".popup-btn"),r=function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11)return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(n,2)},i=function(e){return 1-r(1-e)},c.forEach((function(e){e.addEventListener("click",(function(){var e=document.documentElement.clientWidth,t=document.querySelector(".popup-content"),n=t.clientWidth;e>768?(a.style.display="block",function(e){var t=e.timing,n=e.draw,o=e.duration,r=performance.now();requestAnimationFrame((function e(a){var c=(a-r)/o;c>1&&(c=1);var i=t(c);n(i),c<1&&requestAnimationFrame(e)}))}({duration:1e3,timing:i,draw:function(o){t.style.left=o*(e/2-n/2)+"px"}})):(a.style.display="block",t.style.left=e/2-n/2+"px")}))})),a.addEventListener("click",(function(e){var t=document.querySelector(".popup-content"),n=e.target;n.classList.contains("popup-close")?(t.style.left="",a.style.display="none"):(n=n.closest(".popup-content"))||(t.style.left="",a.style.display="none")})),t=document.querySelector(".service-header"),n=t.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab"),t.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&n.forEach((function(e,r){e===t&&function(e){for(var t=0;t<o.length;t++)e===t?(n[t].classList.add("active"),o[t].classList.remove("d-none")):(n[t].classList.remove("active"),o[t].classList.add("d-none"))}(r)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots"),r=0;!function(){for(var e=0;e<t.length;e++){var n=document.createElement("li");n.classList.add("dot"),0===e&&n.classList.add("dot-active"),o.appendChild(n)}}();var a=document.querySelectorAll(".dot"),c=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},l=function(){c(t,r,"portfolio-item-active"),c(a,r,"dot-active"),++r>=t.length&&(r=0),i(t,r,"portfolio-item-active"),i(a,r,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(l,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(c(t,r,"portfolio-item-active"),c(a,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),i(t,r,"portfolio-item-active"),i(a,r,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(1500)}(),document.querySelectorAll(".command__photo").forEach((function(e){var t=e.getAttribute("src");e.addEventListener("mouseover",(function(t){t.target.src=e.dataset.img})),e.addEventListener("mouseleave",(function(e){e.target.src=t}))})),document.body.addEventListener("input",(function(e){var t=e.target;t.matches(".calc-item")&&(t.value=t.value.replace(/[^\d\.]/g,"")),t.matches(".form-email")&&(t.value=t.value.replace(/[^a-z@_`\.*\-!~]/gi,""))}),{capture:!0}),document.body.addEventListener("blur",(function(e){var t=e.target;"INPUT"===t.tagName&&(t.value=t.value.replace(/^\s+/gi,""),t.value=t.value.replace(/\s+$/gi,""),t.value=t.value.replace(/\s+/gi," "),t.value=t.value.replace(/^-+/gi,""),t.value=t.value.replace(/-+$/gi,""),t.value=t.value.replace(/-+/gi,"-"),t.value=t.value.replace(/[^@_`\.*\-!~\w\d[а-я]]/gi,"")),(t.matches(".form-name")||t.matches(".top-form"))&&(t.value=t.value.replace(/([а-я])([а-я]+)/gi,(function(e,t,n){return t.toUpperCase()+n.toLowerCase()})))}),{capture:!0}),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),i=document.getElementById("total"),l=0,u=function(){var e=1,n=1,i=o.options[o.selectedIndex].value,u=+r.value;c.value>1&&(e+=(c.value-1)/10),a.value&&a.value<5?n*=2:a.value&&a.value<10&&(n*=1.5),i&&u&&(l=Math.ceil(t*i*u*e*n)),s(l)};function s(t){var n=0;t>0&&(e=setInterval((function(){n+=100,i.textContent=n,n>=t&&(clearInterval(e),i.textContent=t)}),1))}n.addEventListener("change",(function(t){var n=t.target;(n.matches("select")||n.matches("input"))&&(l=0,i.textContent=0,clearInterval(e),u())}))}(100),function(){var t=document.createElement("div");t.style.cssText="font-size: 2rem; color: #fff;";var n=function(){document.querySelectorAll("form").forEach((function(t){var n;(n=t.elements,function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){"INPUT"===e.tagName&&(e.value="")}))}))};document.addEventListener("submit",(function(e){var o=e.target;e.preventDefault(),o.appendChild(t),t.textContent="Загрузка...";var r=new FormData(o),a={};r.forEach((function(e,t){a[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(a).then((function(e){if(200!==e.status)throw new Error("status network is not 200");t.textContent="Спасибо! Мы скоро с вами свяжемся!",n()})).catch((function(e){t.textContent="Что-то пошло не так...",console.error(e),n()}))}))}(),document.addEventListener("input",(function(e){var t=e.target,n=t.value,o=function(e,t,n){!function(e,t){return t.test(e)}(e,t)?(function(e){e.style.border="2px solid red"}(n),function(e){e.closest("form").querySelector("button").disabled=!0}(n)):(function(e){e.closest("form").querySelector("button").disabled=!1}(n),function(e){e.style.border="2px solid green"}(n))};t.matches(".form-phone")&&o(n,/^\+?[78]([-()]*\d){10}$/,t),t.matches(".form-name, #form2-name")&&o(n,/^[а-яё\s]+$/gi,t),t.matches(".mess")&&o(n,/^[а-яё\s\d\.!,;\-:]+$/gi,t)}))})();